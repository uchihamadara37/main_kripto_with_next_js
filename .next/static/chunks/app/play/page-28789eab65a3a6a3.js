(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{7615:()=>{},9972:()=>{},6031:(e,a,t)=>{Promise.resolve().then(t.bind(t,2248))},2937:(e,a,t)=>{"use strict";t.d(a,{B:()=>s,L:()=>l});var r=t(1063),n=t(7411).Buffer;function s(e,a){try{if(a.length<32)for(let e=a.length;e<32;e++)a+="&";else a.length>32&&(a=a.slice(0,32));let t=(0,r.createCipheriv)("aes-256-gcm",a,"000000001110"),n=t.update(e,"utf8","base64");n+=t.final("base64");let s=t.getAuthTag();return n+"."+s.toString("base64")}catch(e){throw Error("Encryption failed: ".concat(e.message))}}function l(e,a){try{if(a.length<32)for(let e=a.length;e<32;e++)a+="&";else a.length>32&&(a=a.slice(0,32));console.log(a);let[t,s]=e.split("."),l=(0,r.createDecipheriv)("aes-256-gcm",a,"000000001110");l.setAuthTag(new Uint8Array(n.from(s,"base64")));let o=l.update(t,"base64","utf8");return o+=l.final("utf8")}catch(e){return alert("Dekripsi gagal"),""}}},2248:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>R});var r=t(7988),n=t(6081),s=t(3079),l=t(7880),o=t(2558);let i=l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,o.cn)("w-full caption-bottom text-sm",t),...n})})});i.displayName="Table";let c=l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("thead",{ref:a,className:(0,o.cn)("[&_tr]:border-b",t),...n})});c.displayName="TableHeader";let d=l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,o.cn)("[&_tr:last-child]:border-0",t),...n})});d.displayName="TableBody",l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let m=l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("tr",{ref:a,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});m.displayName="TableRow";let u=l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("th",{ref:a,className:(0,o.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})});u.displayName="TableHead";let h=l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("td",{ref:a,className:(0,o.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})});h.displayName="TableCell";let x=l.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("caption",{ref:a,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",t),...n})});x.displayName="TableCaption";var f=t(3745),g=t(8529);let p=(0,t(824).F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function b(e){let{className:a,variant:t,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)(p({variant:t}),a),...n})}var j=t(6461),w=t(9551);function v(e){let a=new Date(new Date(e).getTime()+252e5),t=a.getUTCDate(),r=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][a.getUTCMonth()],n=a.getUTCFullYear(),s=a.getUTCHours().toString().padStart(2,"0"),l=a.getUTCMinutes().toString().padStart(2,"0");return"".concat(t," ").concat(r," ").concat(n," jam ").concat(s,":").concat(l)}function N(e){let a=new Date(new Date(e).getTime()+252e5),t=a.getUTCDate(),r=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][a.getUTCMonth()],n=a.getUTCFullYear();return"".concat(t," ").concat(r," ").concat(n)}var y=t(1685),k=t(4314),C=t(2326);let E=e=>{let{allRiwayat:a,allUser:t}=e,n=(0,l.useRef)(null),[s,g]=(0,l.useState)(!1),[p,b]=(0,l.useState)(""),[j,E]=(0,l.useState)(""),[S,T]=(0,l.useState)("user"),[A,R]=(0,l.useState)([]);(0,l.useEffect)(()=>{},[]);let _=(0,l.useCallback)(async e=>{if(!n.current)return;let a=w.Wp.table_to_sheet(n.current),t=w.Wp.book_new();w.Wp.book_append_sheet(t,a,"Sheet1");let r=new Blob([w.M9(t,{bookType:"xlsx",type:"array"})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=new File([r],"tabel_export.xlsx",{type:r.type});if(!s||!p){alert("file excel or key not found");return}try{console.log(s),console.log("mulai encode");let e=await (0,k.oL)(s,p);console.log("hasil string dari excel: ",e),E(e);let a=prompt("Masukkan nama file:","tabel_export.xlsx");if(!a)return;console.log(a);let t=(0,k.Hg)(e,a.endsWith(".xlsx")?a:"".concat(a,".xlsx"),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");(0,k.vj)(t)}catch(e){console.error(e)}finally{b("")}},[p]);return(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,r.jsx)("button",{className:(0,o.cn)("px-3 py-2","user"==S?"border-b-2 border-primary font-semibold":""),onClick:()=>T("user"),children:"Data Pasien"}),(0,r.jsx)("button",{className:(0,o.cn)("px-3 py-2","riwayat"==S?"border-b-2 border-primary font-semibold":""),onClick:()=>T("riwayat"),children:"Data Riwayat Semua Pasien"})]}),"user"==S&&(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("h1",{className:"mb-3 font-semibold text-xl mt-4",children:"Table User ke Excel"}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-35rem)] overflow-x-auto rounded-lg border border-orange-700",children:(0,r.jsxs)(i,{ref:n,className:"",children:[(0,r.jsx)(x,{children:"Semoga sehat selalu."}),(0,r.jsx)(c,{children:(0,r.jsxs)(m,{className:"border-b-2 border-orange-700 bg-orange-700 bg-opacity-10",children:[(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[15rem]",children:"NIK"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[18rem]",children:"Nama"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[10rem]",children:"Tanggal lahir"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[8rem]",children:"Gender"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[20rem]",children:"Alamat"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[10rem]",children:"Status"})]})}),(0,r.jsx)(d,{children:t.map(e=>(0,r.jsxs)(m,{className:"cursor-pointer border-b border-orange-700",children:[(0,r.jsx)(h,{className:"font-normal",children:e.nik}),(0,r.jsx)(h,{className:"whitespace-nowrap",children:e.name}),(0,r.jsx)(h,{className:"min-w-[10rem]",children:N(e.birth_date)}),(0,r.jsx)(h,{children:e.gender}),(0,r.jsx)(h,{className:"min-w-[15rem]",children:e.address}),(0,r.jsx)(h,{children:e.status})]},e.id))})]})})]}),"riwayat"==S&&(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("h1",{className:"mb-3 font-semibold text-xl mt-4",children:"Table Semua Riwayat ke Excel"}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-35rem)] rounded-lg border border-orange-700",children:(0,r.jsxs)(i,{ref:n,className:"",children:[(0,r.jsx)(x,{children:"Semoga sehat selalu."}),(0,r.jsx)(c,{children:(0,r.jsxs)(m,{className:"border-b-2 border-orange-700 bg-orange-700 bg-opacity-10",children:[(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[15rem]",children:"Nama Pasien"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[12rem]",children:"NIK"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 min-w-[10rem]",children:"Waktu kunjungan pasien"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[8rem]",children:"Keluhan"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 min-w-[15rem]",children:"Diagnosis"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[10rem]",children:"Dokter | Perawat"})]})}),(0,r.jsx)(d,{children:a.map(e=>(0,r.jsxs)(m,{className:"cursor-pointer border-b border-orange-700",children:[(0,r.jsx)(h,{className:"whitespace-nowrap",children:e.nama_pasien}),(0,r.jsx)(h,{className:"",children:e.nik}),(0,r.jsx)(h,{className:"",children:v(e.timestamp)}),(0,r.jsx)(h,{className:"",children:e.keluhan}),(0,r.jsx)(h,{className:"",children:e.keterangan}),(0,r.jsx)(h,{className:"whitespace-nowrap",children:e.name_admin})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[!s&&(0,r.jsx)("button",{onClick:()=>{if(!n.current)return;let e=prompt("Masukkan nama file:","tabel_export.xlsx");if(!e)return;let a=w.Wp.table_to_sheet(n.current),t=w.Wp.book_new();w.Wp.book_append_sheet(t,a,"Sheet1");let r=new Blob([w.M9(t,{bookType:"xlsx",type:"array"})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,C.saveAs)(r,e.endsWith(".xlsx")?e:"".concat(e,".xlsx"))},className:"mt-4 bg-green-600 text-white px-4 py-2 rounded-md",children:"Export Ke Excel Langsung"}),(0,r.jsx)("button",{onClick:()=>g(!s),className:(0,o.cn)("mt-4 text-white px-4 py-2 rounded-md",s?"bg-red-500":"bg-green-700"),children:s?"Cancel":"Enkripsi Terlebih Dahulu"})]}),s&&(0,r.jsxs)("div",{className:"flex flex-col mt-3 lg:w-1/2",children:[(0,r.jsx)("label",{htmlFor:"",children:"Masukan kunci enkripsi"}),(0,r.jsx)("input",{type:"text",className:"mb-2 rounded-md mt-2",value:p,onChange:e=>b(e.target.value)}),(0,r.jsx)(y.J,{className:(0,o.cn)("mt-2"),children:"Mulai Enkripsi"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(f.$,{variant:"default",className:"",onClick:e=>_(e),children:"Encrypt and Download Excel File"})})]})]})};function S(){let[e,a]=(0,l.useState)([]),t=async()=>{let e=await fetch("/api/antrean/");a((await e.json()).data)};(0,l.useEffect)(()=>{t();let e=setInterval(()=>{t()},1e4);return()=>clearInterval(e)},[]);let n=e=>{a(a=>a.filter(a=>a.id!==e))},s=async e=>{if(confirm("Apakah anda serius sudah memanggil \natau malah pasien tidak datang?")){let a=await fetch("/api/antrean/".concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json",Connection:"keep-alive","Keep-Alive":"timeout=5"}});if(!a.ok)throw Error("Error adding user");n(e.id),alert("Antrean ".concat(e.nama," dengan nomor antri ").concat(e.no_urut," telah dihapus")),await a.json()}},o=(0,l.useCallback)(async()=>{let e=confirm("Apakah anda serius ingin menghapus semua antrean?"),t=!1;if(e&&(t=confirm("Yakin? :)")),t)try{let e=await fetch("/api/antrean",{method:"DELETE",headers:{"Content-Type":"application/json",Connection:"keep-alive","Keep-Alive":"timeout=5"}});if(!e.ok)throw Error("Error adding user");a([]),alert("Semua antrean telah dihapus"),await e.json()}catch(e){alert("Terjadi kesalahan saat menghapus antrean"),console.error(e)}},[e]);return(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"mb-3 text-red-700",children:"Tolong panggil pasien sesuai antrean!"}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-35rem)]  rounded-lg border border-orange-700",children:(0,r.jsxs)(i,{className:"",children:[(0,r.jsx)(c,{children:(0,r.jsxs)(m,{className:"border-b-2 border-orange-700 bg-orange-700 bg-opacity-10",children:[(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[15rem]",children:"Nama"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[8rem]",children:"No Urut"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 min-w-[10rem]",children:"Waktu Ambil Nomor"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[10rem]",children:"Panggil | Hapus"})]})}),(0,r.jsx)(d,{children:e.map(e=>(0,r.jsxs)(m,{className:"cursor-pointer border-b border-orange-700",children:[(0,r.jsx)(h,{className:"whitespace-nowrap",children:e.nama}),(0,r.jsx)(h,{className:"font-normal",children:e.no_urut}),(0,r.jsx)(h,{children:v(e.timestamp)}),(0,r.jsx)(h,{children:(0,r.jsx)(f.$,{variant:"destructive",onClick:()=>s(e),children:"Hapus"})})]},e.id))})]})}),(0,r.jsx)("div",{className:"flex justify-center mt-5",children:(0,r.jsx)(f.$,{onClick:()=>o(),children:"Hapus Semua"})})]})}var T=t(961),A=t(6650);function R(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(_,{})})}function _(){let e=(0,n.useRouter)(),a=(0,n.useSearchParams)(),t=(0,s.b)("email","jangkrik"),p=a.get(t),[w,y]=(0,l.useState)(!0),[k,C]=(0,l.useState)([]),[R,_]=(0,l.useState)([]),[D,L]=(0,l.useState)([]),[U,F]=(0,l.useState)(null),[M,P]=(0,l.useState)(!1),[O,K]=(0,l.useState)("user"),[B,H]=(0,l.useState)(""),[J,W]=(0,l.useState)(""),[I,$]=(0,l.useState)(0),z=e=>{F(e),P(!0)},[G,V]=(0,l.useState)({id:0,name:"",email:"",nik:"",birth_date:"",status:null,role:null,address:null,gender:null});if(!p)return e.replace("/"),null;let X=async()=>{let e=await fetch("/api/riwayat/");_((await e.json()).data)},Y=(0,s.D)(p,"jangkrik");(0,l.useEffect)(()=>{(async()=>{try{console.log("email didapat",Y);let a=await fetch("/api/email/".concat(Y),{method:"GET",headers:{"Content-Type":"application/json"}});if(a.ok){let t=await a.json();if(console.log("Tipe data:",typeof t.data),console.log("Struktur data:",Object.keys(t.data)),console.log("Isi lengkap:",t.data),t.data&&t.data.length>0){let e=t.data[0];V(e),console.log("data user:",G)}else alert("Silakan login terlebih dahulu"),e.replace("/"),console.log("lanjut")}}catch(e){console.log(e)}})()},[]),(0,l.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/riwayat/".concat(G.id));C((await e.json()).data)},a=async()=>{let e=await fetch("/api/userBiasa");L((await e.json()).data)};G.id&&"admin"!=G.role?e():(a(),X())},[G]),(0,l.useEffect)(()=>{console.log("Effect user:",G)},[G]),(0,l.useEffect)(()=>{console.log("Effect riwayat:",k)},[k]),(0,l.useEffect)(()=>{console.log("Effect noAntre oioi:",I)},[I]),(0,l.useEffect)(()=>{let e=async()=>{console.log("user id",G.id);let e=await fetch("/api/antrean/".concat(G.id)),a=await e.json();console.log("data antre",a),a.data.length>0?$(a.data[0].no_urut):$(0)};e();let a=setInterval(()=>{e()},15e3);return()=>clearInterval(a)},[G]);let q=(0,l.useCallback)(async()=>{if(confirm("Apakah anda yakin ingin menyimpan riwayat ini?")){let e={id_user:null==U?void 0:U.id,keluhan:B,keterangan:J,id_admin:G.id},a=await fetch("/api/riwayat",{method:"POST",headers:{"Content-Type":"application/json",Connection:"keep-alive","Keep-Alive":"timeout=5"},body:JSON.stringify(e)});if(!a.ok)throw Error("Error adding user");console.log("riwayat added successfully:",await a.json()),X(),H(""),W(""),P(!1),F(null)}},[B,J]),Q=async()=>{let e={id_user:G.id,nama:G.name},a=await fetch("/api/antrean",{method:"POST",headers:{"Content-Type":"application/json",Connection:"keep-alive","Keep-Alive":"timeout=5"},body:JSON.stringify(e)});if(!a.ok)throw Error("Error adding user");let t=await a.json();if(console.log("hasil data post antre",t),console.log("hasil data noMax",t.noMax),t.noMax&&(console.log("nomax mase :",t.noMax),$(t.noMax)),t.message){alert(t.message);return}};return(0,r.jsx)("div",{className:"root-login min-h-screen bg-gray-50",children:(0,r.jsx)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsx)("div",{className:"bg-white bg-opacity-95 rounded-lg shadow-sm p-6 max-h-[calc(100vh-2rem)] overflow-hidden",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("p",{className:"text-3xl mb-3",children:G.name}),"admin"!=G.role?(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("h1",{className:"",children:[(0,r.jsx)(b,{children:"Tanggal Lahir"})," ",N(G.birth_date)," ",(0,r.jsx)(b,{children:"Gender"})," ",G.gender]}),(0,r.jsx)("div",{className:"mb-4 flex flex-row gap-4",children:0==I?(0,r.jsxs)("div",{className:" mt-10 flex flex-col lg:flex-row gap-3",children:[(0,r.jsx)(f.$,{variant:"default",className:" bg-green-600",onClick:()=>Q(),children:"Ambil Antrean Sekarang"}),(0,r.jsx)("p",{className:"text-center lg:text-start font-semibold",children:"Silakan ambil antrean jika anda serius ingin kunjungan medis ke pukesmas."})]}):(0,r.jsxs)(T.Fc,{variant:"destructive",className:"border-green-600 text-green-600 [&>svg]:text-green-600 mt-5",children:[(0,r.jsx)(A.A,{className:"h-4 w-4"}),(0,r.jsx)(T.XL,{children:"Selamat!"}),(0,r.jsxs)(T.TN,{children:["Nomor antrian anda ",I,". Silakan menunggu panggilan petugas."]})]})}),(0,r.jsx)("h1",{className:"text-center text-2xl mb-5 lg:mb-3 font-bold text-orange-950",children:"Daftar Riwayat Anda Ke Pukesmas"}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-22rem)] overflow-x-auto rounded-md border border-orange-700",children:(0,r.jsxs)(i,{className:"",children:[(0,r.jsx)(c,{children:(0,r.jsxs)(m,{className:"border-b-2  border-orange-700 bg-orange-700 bg-opacity-10",children:[(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[12rem] lg:w-[18rem] ",children:"Waktu kunjungan pasien"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[10rem] lg:w-[8rem]",children:"Keluhan"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[20rem]",children:"Diagnosis"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[10rem]",children:"Dokter / Perawat"})]})}),(0,r.jsx)(d,{children:k.map(e=>(0,r.jsxs)(m,{className:"cursor-pointer border-b border-orange-700",children:[(0,r.jsx)(h,{className:"border-0 lg:border-r-0 border-orange-700",children:v(e.timestamp)}),(0,r.jsx)(h,{className:"border-0 lg:border-r-0 border-orange-700",children:e.keluhan}),(0,r.jsx)(h,{className:"border-0 lg:border-r-0 border-orange-700",children:e.keterangan}),(0,r.jsx)(h,{className:" lg:border-r-0 border-orange-700",children:e.name_admin})]},e.id))})]})})]}):(0,r.jsxs)("div",{className:"flex flex-col mb-1 lg:mx-0  lg:mb-0",children:[(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap justify-center gap-3 mb-5",children:[(0,r.jsx)(f.$,{className:(0,o.cn)("bg-green-500","user"==O?"bg-primary":""),onClick:()=>K("user"),children:"Pasien Terdaftar"}),(0,r.jsx)(f.$,{className:(0,o.cn)("bg-green-600","riwayat"==O?"bg-primary":""),onClick:()=>K("riwayat"),children:"Riwayat Kunjungan"}),(0,r.jsx)(f.$,{className:(0,o.cn)("bg-green-700","export"==O?"bg-primary":""),onClick:()=>K("export"),children:"Export Excel"}),(0,r.jsx)(f.$,{className:(0,o.cn)("bg-green-800","antri"==O?"bg-primary":""),onClick:()=>K("antri"),children:"Lihat Antrean"})]}),"user"==O&&(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("h1",{className:"text-center text-3xl mb-8 lg:mb-5 lg:mt-4  font-bold text-orange-950",children:"Daftar Masyarakat yang Tergabung Sistem."}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-22rem)] overflow-x-auto rounded-lg border border-orange-700",children:(0,r.jsxs)(i,{className:"table-auto w-full",children:[(0,r.jsx)(x,{children:"Semoga sehat selalu."}),(0,r.jsx)(c,{children:(0,r.jsxs)(m,{className:"border-b-2 border-orange-700 bg-orange-700 bg-opacity-10",children:[(0,r.jsx)(u,{className:"font-bold text-slate-900 break-all ",children:"NIK"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 ",children:"Nama"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[13rem]",children:"Tanggal lahir"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 hidden lg:block",children:"Gender"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 ",children:"Alamat"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 ",children:"Status"})]})}),(0,r.jsx)(d,{children:D.map(e=>(0,r.jsxs)(m,{className:"cursor-pointer border-b border-orange-700",onClick:()=>z(e),children:[(0,r.jsx)(h,{className:"font-normal",children:e.nik}),(0,r.jsx)(h,{className:"",children:e.name}),(0,r.jsx)(h,{className:"whitespace-nowrap",children:N(e.birth_date)}),(0,r.jsx)(h,{className:"hidden lg:block",children:e.gender}),(0,r.jsx)(h,{className:"min-w-[20rem]",children:e.address}),(0,r.jsx)(h,{children:e.status})]},e.id))})]})})]}),"riwayat"==O&&(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("h1",{className:"text-center  text-3xl mb-8 lg:mb-5 lg:mt-4 font-bold text-orange-950",children:"Daftar Kunjungan Pasien Terbaru."}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-22rem)] overflow-x-auto rounded-md border border-orange-700",children:(0,r.jsxs)(i,{className:"",children:[(0,r.jsx)(x,{children:"Semoga sehat selalu."}),(0,r.jsx)(c,{children:(0,r.jsxs)(m,{className:"border-b-2 border-orange-700 bg-orange-700 bg-opacity-10",children:[(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[15rem]",children:"Nama Pasien"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[14rem]",children:"NIK"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[18rem]",children:"Waktu kunjungan pasien"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[8rem]",children:"Keluhan"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[20rem]",children:"Diagnosis"}),(0,r.jsx)(u,{className:"font-bold text-slate-900 w-[10rem]",children:"Dokter / Perawat"})]})}),(0,r.jsx)(d,{children:R.map(e=>(0,r.jsxs)(m,{className:"cursor-pointer border-b border-orange-700",children:[(0,r.jsx)(h,{className:"whitespace-nowrap",children:e.nama_pasien}),(0,r.jsx)(h,{className:"",children:e.nik}),(0,r.jsx)(h,{className:"min-w-[10rem]",children:v(e.timestamp)}),(0,r.jsx)(h,{className:"",children:e.keluhan}),(0,r.jsx)(h,{className:"min-w-[15rem]",children:e.keterangan}),(0,r.jsx)(h,{className:"whitespace-nowrap",children:e.name_admin})]},e.id))})]})})]}),"export"==O&&(0,r.jsx)(E,{allRiwayat:R,allUser:D}),"antri"==O&&(0,r.jsx)("div",{className:"",children:(0,r.jsx)(S,{})}),(0,r.jsx)(g.lG,{open:M,onOpenChange:()=>{P(!1),F(null),H(""),W("")},children:(0,r.jsxs)(g.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(g.c7,{children:[(0,r.jsx)(g.L3,{className:"text-xl",children:"Tambahkan riwayat kunjungan pasien"}),U&&(0,r.jsxs)(g.rr,{children:["Pasien dengan nama ",U.name," ",(0,r.jsx)("br",{}),"NIK ",U.nik]})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-1",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[(0,r.jsx)(j.J,{htmlFor:"name",className:"text-left mb-1 text-lg rounded-md",children:"Keluhan"}),(0,r.jsx)("textarea",{id:"name",placeholder:"....",className:"w-full h-40 rounded-md",value:B,onChange:e=>H(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[(0,r.jsx)(j.J,{htmlFor:"name",className:"text-left mb-1 text-lg",children:"Diagnosis Awal"}),(0,r.jsx)("textarea",{id:"name",placeholder:"isi diagnosis atau rujuakan",className:"w-full h-40 rounded-md",value:J,onChange:e=>W(e.target.value)})]})]}),(0,r.jsx)(g.Es,{children:(0,r.jsx)(f.$,{onClick:()=>q(),children:"Tambahkan Data"})})]})})]})]})})})})})}t(7411).Buffer},961:(e,a,t)=>{"use strict";t.d(a,{Fc:()=>i,TN:()=>d,XL:()=>c});var r=t(7988),n=t(7880),s=t(824),l=t(2558);let o=(0,s.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=n.forwardRef((e,a)=>{let{className:t,variant:n,...s}=e;return(0,r.jsx)("div",{ref:a,role:"alert",className:(0,l.cn)(o({variant:n}),t),...s})});i.displayName="Alert";let c=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("h5",{ref:a,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...n})});c.displayName="AlertTitle";let d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...n})});d.displayName="AlertDescription"},3745:(e,a,t)=>{"use strict";t.d(a,{$:()=>c,r:()=>i});var r=t(7988),n=t(7880),s=t(7142),l=t(824),o=t(2558);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,a)=>{let{className:t,variant:n,size:l,asChild:c=!1,...d}=e,m=c?s.DX:"button";return(0,r.jsx)(m,{className:(0,o.cn)(i({variant:n,size:l,className:t})),ref:a,...d})});c.displayName="Button"},8529:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>m,Es:()=>h,L3:()=>x,c7:()=>u,lG:()=>i,rr:()=>f});var r=t(7988),n=t(7880),s=t(4972),l=t(1018),o=t(2558);let i=s.bL;s.l9;let c=s.ZL;s.bm;let d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(s.hJ,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});d.displayName=s.hJ.displayName;let m=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(s.UC,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[n,(0,r.jsxs)(s.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.UC.displayName;let u=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};u.displayName="DialogHeader";let h=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};h.displayName="DialogFooter";let x=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(s.hE,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});x.displayName=s.hE.displayName;let f=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(s.VY,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...n})});f.displayName=s.VY.displayName},6461:(e,a,t)=>{"use strict";t.d(a,{J:()=>c});var r=t(7988),n=t(7880),s=t(1685),l=t(824),o=t(2558);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsx)(s.b,{ref:a,className:(0,o.cn)(i(),t),...n})});c.displayName=s.b.displayName},3079:(e,a,t)=>{"use strict";t.d(a,{D:()=>n,b:()=>r});let r=(e,a)=>{let t="";a=a.toUpperCase();for(let r=0,n=0;r<e.length;r++){let s=e.charCodeAt(r);s>=65&&s<=90?(t+=String.fromCharCode((s-65+(a.charCodeAt(n%a.length)-65))%26+65),n++):s>=97&&s<=122?(t+=String.fromCharCode((s-97+(a.charCodeAt(n%a.length)-65))%26+97),n++):t+=e.charAt(r)}return t},n=(e,a)=>{let t="";a=a.toUpperCase();for(let r=0,n=0;r<e.length;r++){let s=e.charCodeAt(r);s>=65&&s<=90?(t+=String.fromCharCode((s-65-(a.charCodeAt(n%a.length)-65)+26)%26+65),n++):s>=97&&s<=122?(t+=String.fromCharCode((s-97-(a.charCodeAt(n%a.length)-65)+26)%26+97),n++):t+=e.charAt(r)}return t}},4314:(e,a,t)=>{"use strict";t.d(a,{Hg:()=>i,It:()=>s,Po:()=>c,iu:()=>l,oL:()=>n,vj:()=>o});var r=t(2937);function n(e,a){return new Promise((t,n)=>{let s=new FileReader;s.onload=e=>{try{var s;let n=null===(s=e.target)||void 0===s?void 0:s.result;if(!n)throw Error("File reading failed");let l=new Uint8Array(n),o=btoa(l.reduce((e,a)=>e+String.fromCharCode(a),""));if(a.length<32)for(let e=a.length;e<32;e++)a+="&";else a.length>32&&(a=a.slice(0,32));console.log("base64 content : ",o);let i=(0,r.B)(o,a);t(i)}catch(e){n(e)}},s.onerror=e=>{n(e)},s.readAsArrayBuffer(e)})}function s(e,a){return new Promise((t,n)=>{try{if(a.length<32)for(let e=a.length;e<32;e++)a+="&";else a.length>32&&(a=a.slice(0,32));let s=(0,r.L)(e,a);if(console.log("base64 content hasil dekrip : ",s),!s)return n();let l=atob(s),o=Array(l.length);for(let e=0;e<l.length;e++)o[e]=l.charCodeAt(e);let i=new Uint8Array(o),c=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});t(c)}catch(e){n()}})}async function l(e,a,t){try{let a=document.createElement("a");a.href=URL.createObjectURL(e),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)}catch(e){console.error("Dekripsi dan download error:",e)}}function o(e){let a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)}function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.txt",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/pdf";return new File([e],a,{type:t})}function c(e){return new Promise((a,t)=>{let r=new FileReader;r.onload=e=>{var r;let n=null===(r=e.target)||void 0===r?void 0:r.result;"string"==typeof n?a(n):t(Error("Failed to convert file to string"))},r.onerror=()=>{t(Error("Error reading file"))},r.readAsText(e)})}},2558:(e,a,t)=>{"use strict";t.d(a,{cn:()=>s});var r=t(8857),n=t(4927);function s(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.QP)((0,r.$)(a))}},2326:function(e,a,t){var r,n,s;n=[],void 0!==(s="function"==typeof(r=function(){"use strict";function a(e,a,t){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,a,t)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var a=new XMLHttpRequest;a.open("HEAD",e,!1);try{a.send()}catch(e){}return 200<=a.status&&299>=a.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t.g&&t.g.global===t.g?t.g:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,l){var o=s.URL||s.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?n(i):r(i.href)?a(e,t,l):n(i,i.target="_blank")):(i.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(i.href)},4e4),setTimeout(function(){n(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,s){if(t=t||e.name||"download","string"!=typeof e){var l;navigator.msSaveOrOpenBlob((void 0===(l=s)?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),t)}else if(r(e))a(e,t,s);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){n(o)})}}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return a(e,t,r);var o="application/octet-stream"===e.type,i=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&i||l)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},d.readAsDataURL(e)}else{var m=s.URL||s.webkitURL,u=m.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){m.revokeObjectURL(u)},4e4)}});s.saveAs=o.saveAs=o,e.exports=o})?r.apply(a,n):r)&&(e.exports=s)},6081:(e,a,t)=>{"use strict";var r=t(6045);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var a=a=>e(e.s=a);e.O(0,[455,430,210,703,411,450,855,531,358],()=>a(6031)),_N_E=e.O()}]);