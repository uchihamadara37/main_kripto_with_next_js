{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file://D%3A/next_js_kriptografi/lib/mysql.js"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nconst pool = mysql.createPool({\r\n    host: process.env.MYSQL_HOST,\r\n    user: process.env.MYSQL_USER,\r\n    password: process.env.MYSQL_PASSWORD,\r\n    database: process.env.MYSQL_DATABASE,\r\n    \r\n    waitForConnections: true,\r\n    connectionLimit: 10,\r\n    queueLimit: 0,\r\n});\r\n\r\nexport async function executeQuery({ query, values = [] }) {\r\n    try {\r\n        const [results] = await pool.execute(query, values);\r\n        return results;\r\n    } catch (error) {\r\n        console.log(\"Error mase : \",error)\r\n        \r\n        throw Error(error.message);\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,OAAO,uLAAA,CAAA,UAAK,CAAC,UAAU,CAAC;IAC1B,MAAM,QAAQ,GAAG,CAAC,UAAU;IAC5B,MAAM,QAAQ,GAAG,CAAC,UAAU;IAC5B,UAAU,QAAQ,GAAG,CAAC,cAAc;IACpC,UAAU,QAAQ,GAAG,CAAC,cAAc;IAEpC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AAChB;AAEO,eAAe,aAAa,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE;IACrD,IAAI;QACA,MAAM,CAAC,QAAQ,GAAG,MAAM,KAAK,OAAO,CAAC,OAAO;QAC5C,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,GAAG,CAAC,iBAAgB;QAE5B,MAAM,MAAM,MAAM,OAAO;IAC7B;AACJ"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file://D%3A/next_js_kriptografi/app/api/riwayat/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { executeQuery } from \"@/lib/mysql\";\r\n\r\nexport async function GET(request, { params }) {\r\n    try {\r\n        // console.log(\"okokoko\")\r\n        // Mengambil parameter id dari URL\r\n        // console.log(\"route email :\", email)\r\n        const data = await executeQuery({\r\n            query: \"SELECT u2.name as nama_pasien, u2.nik as nik, r.id as id, r.id_user as id_user, r.keluhan as keluhan, r.keterangan as keterangan, r.id_admin as id_admin, r.timestamp as timestamp, u.name as name_admin FROM riwayat r INNER JOIN user u ON r.id_admin = u.id INNER JOIN user u2 ON r.id_user = u2.id ORDER BY timestamp DESC;\",\r\n            values: [],\r\n        });\r\n\r\n        return NextResponse.json({ data });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function POST(request) {\r\n    try {\r\n        const body = await request.json(); // Mengambil data dari body request\r\n        const {\r\n            id_user,\r\n            keluhan,\r\n            keterangan,\r\n            id_admin,\r\n        } = body; // Sesuaikan sesuai dengan kolom yang kamu butuhkan\r\n\r\n        const data = await executeQuery({\r\n            query: \"INSERT INTO `riwayat` (`id_user`, `keluhan`, `keterangan`, `id_admin`) VALUES (?, ?, ?, ?);\",\r\n            values: [\r\n                id_user,\r\n                keluhan,\r\n                keterangan,\r\n                id_admin\r\n            ],\r\n        });\r\n\r\n        return NextResponse.json({\r\n            message: \"Riwayat created successfully\",\r\n            data,\r\n        });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAO,EAAE,EAAE,MAAM,EAAE;IACzC,IAAI;QACA,yBAAyB;QACzB,kCAAkC;QAClC,sCAAsC;QACtC,MAAM,OAAO,MAAM,CAAA,GAAA,8GAAA,CAAA,eAAY,AAAD,EAAE;YAC5B,OAAO;YACP,QAAQ,EAAE;QACd;QAEA,OAAO,sTAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE;QAAK;IACpC,EAAE,OAAO,OAAO;QACZ,OAAO,sTAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrE;AACJ;AAEO,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI,IAAI,mCAAmC;QACtE,MAAM,EACF,OAAO,EACP,OAAO,EACP,UAAU,EACV,QAAQ,EACX,GAAG,MAAM,mDAAmD;QAE7D,MAAM,OAAO,MAAM,CAAA,GAAA,8GAAA,CAAA,eAAY,AAAD,EAAE;YAC5B,OAAO;YACP,QAAQ;gBACJ;gBACA;gBACA;gBACA;aACH;QACL;QAEA,OAAO,sTAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,OAAO,sTAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrE;AACJ"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}